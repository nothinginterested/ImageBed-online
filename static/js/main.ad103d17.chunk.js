(this["webpackJsonpepic-react"]=this["webpackJsonpepic-react"]||[]).push([[0],{186:function(e,t,r){e.exports=r(348)},191:function(e,t,r){},348:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(10),l=r.n(o),i=(r(191),r(72)),c=r(14),s=r(73),u=r(35),p=r(36),m=r(350),f=r(351),b=r(353),d=r(357),g=r(40),h=r(63),y=r(64),w=r(20),O=(r(105),r(3)),v=r(42),j=r.n(v);j.a.init({appId:"eMi9KzUA9zcTTbPBMkdSK6Dw-gzGzoHsz",appKey:"jhMHYcxkt8EMAS4IxwlC5RAH",serverURL:"https://emi9kzua.lc-cn-n1-shared.com"});var E,U,k,F,x,P,S,I,C,D=function(e,t){var r=new v.User;return r.setUsername(e),r.setPassword(t),new Promise((function(e,t){r.signUp().then((function(t){e(t)}),(function(e){}))}))},N=function(e,t){return new Promise((function(r,n){j.a.User.logIn(e,t).then((function(e){r(e)}),(function(e){n(e)}))}))},z=function(){return j.a.User.current()},A=function(){j.a.User.logOut()},q=function(e,t){var r=new j.a.Object("Image"),n=new j.a.File(e,t);return r.set("filename",e),r.set("owner",j.a.User.current()),r.set("url",n),new Promise((function(e,t){r.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},J=new(E=function(){function e(){Object(h.a)(this,e),Object(g.a)(this,"currentUser",U,this)}return Object(y.a)(e,[{key:"setUser",value:function(){this.currentUser=z()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),U=Object(w.a)(E.prototype,"currentUser",[O.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(w.a)(E.prototype,"setUser",[O.f],Object.getOwnPropertyDescriptor(E.prototype,"setUser"),E.prototype),Object(w.a)(E.prototype,"resetUser",[O.f],Object.getOwnPropertyDescriptor(E.prototype,"resetUser"),E.prototype),E),H=new(k=function(){function e(){Object(h.a)(this,e),Object(g.a)(this,"values",F,this)}return Object(y.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setUserpassword",value:function(e){this.values.password=e}},{key:"register",value:function(){var e=this;return new Promise((function(t,r){D(e.values.username,e.values.password).then((function(e){console.log("111")}))}))}},{key:"login",value:function(){var e=this;return new Promise((function(t,r){N(e.values.username,e.values.password).then((function(e){t(e)}),(function(e){r(e)}))}))}},{key:"logout",value:function(){A(),J.resetUser()}}]),e}(),F=Object(w.a)(k.prototype,"values",[O.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(w.a)(k.prototype,"setUsername",[O.f],Object.getOwnPropertyDescriptor(k.prototype,"setUsername"),k.prototype),Object(w.a)(k.prototype,"setUserpassword",[O.f],Object.getOwnPropertyDescriptor(k.prototype,"setUserpassword"),k.prototype),Object(w.a)(k.prototype,"register",[O.f],Object.getOwnPropertyDescriptor(k.prototype,"register"),k.prototype),Object(w.a)(k.prototype,"login",[O.f],Object.getOwnPropertyDescriptor(k.prototype,"login"),k.prototype),Object(w.a)(k.prototype,"logout",[O.f],Object.getOwnPropertyDescriptor(k.prototype,"logout"),k.prototype),k),K=new(x=function(){function e(){Object(h.a)(this,e),Object(g.a)(this,"filename",P,this),Object(g.a)(this,"file",S,this),Object(g.a)(this,"serverFile",I,this),Object(g.a)(this,"saveFile",C,this)}return Object(y.a)(e,[{key:"setFileName",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return new Promise((function(t,r){q(e.filename,e.file).then((function(r){e.serverFile=r.toJSON(),e.saveCurrentFile(),t(r)})).catch((function(e){r(e)})).finally((function(){}))}))}},{key:"saveCurrentFile",value:function(){window.sessionStorage.setItem("_Image",JSON.stringify(this.serverFile))}},{key:"fetchCurrentFile",value:function(){var e=window.sessionStorage.getItem("_Image"),t=null;e&&(t=JSON.parse(e)),this.serverFile=t}},{key:"url",get:function(){var e;return null===(e=Object(O.q)(this.serverFile))||void 0===e?void 0:e.url.url}}]),e}(),P=Object(w.a)(x.prototype,"filename",[O.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=Object(w.a)(x.prototype,"file",[O.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=Object(w.a)(x.prototype,"serverFile",[O.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=Object(w.a)(x.prototype,"saveFile",[O.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{a:"111"}}}),Object(w.a)(x.prototype,"setFileName",[O.f],Object.getOwnPropertyDescriptor(x.prototype,"setFileName"),x.prototype),Object(w.a)(x.prototype,"setFile",[O.f],Object.getOwnPropertyDescriptor(x.prototype,"setFile"),x.prototype),Object(w.a)(x.prototype,"upload",[O.f],Object.getOwnPropertyDescriptor(x.prototype,"upload"),x.prototype),Object(w.a)(x.prototype,"saveCurrentFile",[O.f],Object.getOwnPropertyDescriptor(x.prototype,"saveCurrentFile"),x.prototype),Object(w.a)(x.prototype,"fetchCurrentFile",[O.f],Object.getOwnPropertyDescriptor(x.prototype,"fetchCurrentFile"),x.prototype),Object(w.a)(x.prototype,"url",[O.g],Object.getOwnPropertyDescriptor(x.prototype,"url"),x.prototype),x),M=Object(n.createContext)({AuthStore:H,UserStore:J,ImageStore:K});window.stores={AuthStore:H,UserStore:J,ImageStore:K};var R=function(){return Object(n.useContext)(M)};function T(){var e=Object(u.a)(["\n      background: white;\n"]);return T=function(){return e},e}function B(){var e=Object(u.a)(["\n      background: white;\n      max-width: 600px;\n      margin: 30px auto;\n      padding: 20px;\n      border-radius: 4px;\n      box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.2);\n\n\n\n"]);return B=function(){return e},e}m.a.Content;var L=p.a.section(B()),V=p.a.section(T()),W={labelCol:{span:8},wrapperCol:{span:10}},_={wrapperCol:{offset:8,span:16}},G=function(){var e=R(),t=e.AuthStore,r=e.UserStore,n=Object(c.f)();return a.a.createElement(V,{style:{padding:"0 50px"}},a.a.createElement(L,null,a.a.createElement(f.a,Object.assign({},W,{name:"basic",initialValues:{remember:!0},onFinish:function(e){console.log("Success:",e),t.setUsername(e.username),t.setUserpassword(e.password),t.login().then((function(e){r.setUser()})).catch((function(e){})),n.push("/")},onFinishFailed:function(e){console.log("Failed:",e)}}),a.a.createElement(f.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},a.a.createElement(b.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})),a.a.createElement(f.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},a.a.createElement(b.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})),a.a.createElement(f.a.Item,Object.assign({},_,{name:"remember",valuePropName:"checked"}),a.a.createElement(d.a,null,"Remember me")),a.a.createElement(f.a.Item,_,a.a.createElement(s.a,{type:"primary",htmlType:"submit"},"Submit")))))};function Y(){var e=Object(u.a)(["\n      background: white;\n"]);return Y=function(){return e},e}function $(){var e=Object(u.a)(["\n      background: white;\n      max-width: 600px;\n      margin: 30px auto;\n      padding: 20px;\n      border-radius: 4px;\n      box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.2);\n\n\n\n"]);return $=function(){return e},e}var Q=p.a.section($()),X=p.a.div(Y()),Z={labelCol:{span:8},wrapperCol:{span:10}},ee={wrapperCol:{offset:8,span:16}},te=function(){var e=R().AuthStore,t=Object(c.f)();return a.a.createElement(X,{style:{padding:"0 50px"}},a.a.createElement(Q,null,a.a.createElement(f.a,Object.assign({},Z,{name:"basic",initialValues:{remember:!0},onFinish:function(r){console.log("Success:",r),e.setUsername(r.username),e.setUserpassword(r.password),e.register().then(),t.push("/login")},onFinishFailed:function(e){console.log("Failed:",e)}}),a.a.createElement(f.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},a.a.createElement(b.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})),a.a.createElement(f.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},a.a.createElement(b.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})),a.a.createElement(f.a.Item,Object.assign({},ee,{name:"remember",valuePropName:"checked"}),a.a.createElement(d.a,null,"Remember me")),a.a.createElement(f.a.Item,ee,a.a.createElement(s.a,{type:"primary",htmlType:"submit"},"Submit")))))},re=function(){return a.a.createElement("h2",null,"user")},ne=r(352),ae=r(355),oe=r(354),le=r(98);function ie(){var e=Object(u.a)(["\n    max-width: 500px;\n"]);return ie=function(){return e},e}function ce(){var e=Object(u.a)(["\n  background: #FFF;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  max-width: 50%;\n  margin: 0 auto;\n  border-radius: 4px;\n  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.2);\n"]);return ce=function(){return e},e}var se=ne.a.Dragger,ue=p.a.section(ce()),pe=p.a.img(ie()),me=Object(le.a)((function(){var e=R(),t=e.ImageStore,r=e.UserStore;Object(n.useEffect)((function(){t.fetchCurrentFile()}),[]);var o={showUploadList:!1,beforeUpload:function(e){return t.setFile(e),t.setFileName(e.name),null===r.currentUser?(ae.a.warning("\u8fd8\u6ca1\u6709\u767b\u5f55"),!1):(t.upload().then((function(e){console.log("\u4e0a\u4f20\u6210\u529f"),ae.a.info("\u4e0a\u4f20\u6210\u529f")})).catch((function(e){console.log(e)})),!1)}};return a.a.createElement("div",null,a.a.createElement(se,o,a.a.createElement("p",{className:"ant-upload-drag-icon"},a.a.createElement(oe.a,null)),a.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),a.a.createElement("p",{className:"ant-upload-hint"},"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files")),",",t.serverFile&&r.currentUser?a.a.createElement(ue,null,a.a.createElement("h1",null,"\u4e0a\u4f20\u7ed3\u679c"),a.a.createElement("dl",null,a.a.createElement("dt",null,"\u7ebf\u4e0a\u5730\u5740"),a.a.createElement("dd",null,a.a.createElement("a",{href:t.url})," ",t.url),a.a.createElement("dt",null,"\u56fe\u7247\u9884\u89c8"),a.a.createElement("dd",null,a.a.createElement(pe,{src:t.url})))):null)})),fe=r(356);function be(){var e=Object(u.a)(["\n      background: white;\n"]);return be=function(){return e},e}var de=m.a.Header,ge=m.a.Content,he=(Object(p.a)(de)(be()),Object(le.a)((function(e){var t=Object(c.g)(),r=R(),o=r.UserStore,l=r.AuthStore;Object(n.useEffect)((function(){o.setUser()}),[]);var s=o.currentUser;return a.a.createElement(m.a,{className:"layout"},a.a.createElement("header",null,a.a.createElement("div",{className:"logo"}),a.a.createElement(fe.a,{mode:"horizontal",selectedKeys:[t.pathname]},a.a.createElement(fe.a.Item,{key:"/"},a.a.createElement(i.b,{to:"/"}," \u4e3b\u9875")),s?a.a.createElement(fe.a.Item,{key:"/login"},s.attributes.username):a.a.createElement(fe.a.Item,{key:"/login"},a.a.createElement(i.b,{to:"/login"},"\u767b\u5f55")),s?a.a.createElement(fe.a.Item,{onClick:function(){l.logout()},key:"/logout"},a.a.createElement("span",null,"\u767b\u51fa")):a.a.createElement(fe.a.Item,{key:"/register"},a.a.createElement(i.b,{to:"/register"},"\u6ce8\u518c")))),a.a.createElement(ge,{style:{background:"white"}},e.children))})));function ye(){return a.a.createElement(i.a,null,a.a.createElement("div",null,a.a.createElement(he,null),a.a.createElement(c.c,null,a.a.createElement(c.a,{path:"/users"},a.a.createElement(re,null)),a.a.createElement(c.a,{path:"/login"},a.a.createElement(G,null)),a.a.createElement(c.a,{path:"/register"},a.a.createElement(te,null)),a.a.createElement(c.a,{path:"/"},a.a.createElement(me,null)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[186,1,2]]]);
//# sourceMappingURL=main.ad103d17.chunk.js.map